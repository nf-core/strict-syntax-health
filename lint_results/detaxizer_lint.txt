Linting Nextflow code..
Linting: conf/igenomes_ignored.config
Linting: conf/base.config
Linting: conf/modules.config
Linting: conf/test_full.config
Linting: conf/test.config
Linting: conf/test_blastn.config
Linting: conf/test_filter_preprocessed.config
Linting: conf/igenomes.config
Linting: nextflow.config
Linting: workflows/detaxizer.nf
Linting: subworkflows/local/utils_nfcore_detaxizer_pipeline/main.nf
Linting: subworkflows/local/generate_downstream_samplesheets/main.nf
Linting: subworkflows/nf-core/utils_nfcore_pipeline/main.nf
Linting: subworkflows/nf-core/utils_nfcore_pipeline/tests/nextflow.config
Linting: subworkflows/nf-core/utils_nextflow_pipeline/main.nf
Linting: subworkflows/nf-core/utils_nextflow_pipeline/tests/nextflow.config
Linting: subworkflows/nf-core/utils_nfschema_plugin/main.nf
Linting: subworkflows/nf-core/utils_nfschema_plugin/tests/nextflow.config
Linting: nf-test.config
Linting: main.nf
Linting: tests/nextflow.config
Linting: modules/local/isolate_kraken2_ids.nf
Linting: modules/local/parse_kraken2report.nf
Linting: modules/local/summarizer.nf
Linting: modules/local/filter_blastn_identcov.nf
Linting: modules/local/filter.nf
Linting: modules/local/merge_ids.nf
Linting: modules/local/map_kraken2seqids_to_fqheaders.nf
Linting: modules/local/rename_fastq_headers_pre.nf
Linting: modules/local/kraken2preparation.nf
Linting: modules/local/summary_blastn.nf
Linting: modules/local/isolate_bbduk_ids.nf
Linting: modules/local/summary_classification.nf
Linting: modules/local/rename_fastq_headers_after.nf
Linting: modules/local/prepare_fasta4blastn.nf
Linting: modules/nf-core/kraken2/kraken2/main.nf
Linting: modules/nf-core/fastqc/main.nf
Linting: modules/nf-core/multiqc/main.nf
Linting: modules/nf-core/multiqc/tests/nextflow.config
Linting: modules/nf-core/fastp/main.nf
Linting: modules/nf-core/fastp/tests/nextflow.interleaved.config
Linting: modules/nf-core/fastp/tests/nextflow.save_failed.config
Linting: modules/nf-core/blast/makeblastdb/main.nf
Linting: modules/nf-core/blast/makeblastdb/tests/nextflow.config
Linting: modules/nf-core/blast/blastn/main.nf
Linting: modules/nf-core/blast/blastn/tests/nextflow.config
Linting: modules/nf-core/bbmap/bbduk/main.nf
Linting: modules/nf-core/bbmap/bbduk/tests/nextflow.config
Linting: modules/nf-core/bbmap/filterbyname/main.nf














Warn  modules/nf-core/bbmap/bbduk/main.nf:48:9: Variable was declared but not used
│  48 |     def args = task.ext.args ?: ''
╰     |         ^^^^



Warn  modules/nf-core/blast/blastn/main.nf:65:9: Variable was declared but not used
│  65 |     def args = task.ext.args ?: ''
╰     |         ^^^^


Warn  modules/nf-core/blast/makeblastdb/main.nf:42:9: Variable was declared but not used
│  42 |     def args           = task.ext.args ?: ''
╰     |         ^^^^




Warn  modules/nf-core/kraken2/kraken2/main.nf:60:9: Variable was declared but not used
│  60 |     def args = task.ext.args ?: ''
╰     |         ^^^^

Warn  modules/nf-core/kraken2/kraken2/main.nf:62:9: Variable was declared but not used
│  62 |     def paired       = meta.single_end ? "" : "--paired"
╰     |         ^^^^^^

Warn  modules/nf-core/kraken2/kraken2/main.nf:65:9: Variable was declared but not used
│  65 |     def readclassification_option = save_reads_assignment ? "--output 
╰     |         ^^^^^^^^^^^^^^^^^^^^^^^^^

Warn  modules/nf-core/kraken2/kraken2/main.nf:66:9: Variable was declared but not used
│  66 |     def compress_reads_command = save_output_fastqs ? "pigz -p $task.c
╰     |         ^^^^^^^^^^^^^^^^^^^^^^



Error subworkflows/local/generate_downstream_samplesheets/main.nf:47:17: Variables in a closure should be declared with `def`
│  47 |                 new_meta = [
╰     |                 ^^^^^^^^

Error subworkflows/local/generate_downstream_samplesheets/main.nf:54:17: Variables in a closure should be declared with `def`
│  54 |                 read_files = reads.flatten().sort(false){ a, b -> a.ge
╰     |                 ^^^^^^^^^^

Error subworkflows/local/generate_downstream_samplesheets/main.nf:108:5: `format_sep` was assigned but not declared
│ 108 |     format_sep = ["csv":",", "tsv":"\t", "txt":"\t"][format]
╰     |     ^^^^^^^^^^

Error subworkflows/local/generate_downstream_samplesheets/main.nf:110:5: `ch_header` was assigned but not declared
│ 110 |     ch_header = ch_list_for_samplesheet
╰     |     ^^^^^^^^^

Error subworkflows/local/generate_downstream_samplesheets/main.nf:112:5: `ch_header` is not defined
│ 112 |     ch_header
╰     |     ^^^^^^^^^

Error subworkflows/local/generate_downstream_samplesheets/main.nf:114:32: `format_sep` is not defined
│ 114 |         .map{ it.keySet().join(format_sep) }
╰     |                                ^^^^^^^^^^

Error subworkflows/local/generate_downstream_samplesheets/main.nf:115:64: `format_sep` is not defined
│ 115 |  .concat( ch_list_for_samplesheet.map{ it.values().join(format_sep) })
╰     |                                                         ^^^^^^^^^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:73:18: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  73 |         .filter{ it.short_reads_1!="" } // MAG doesn't support standal
╰     |                  ^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:75:17: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  75 |             se: it.short_reads_2 ==""
╰     |                 ^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:81:18: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  81 |         .filter{ it.long_reads !="" && it.short_reads_1=="" }
╰     |                  ^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:81:40: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  81 |         .filter{ it.long_reads !="" && it.short_reads_1=="" }
╰     |                                        ^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:82:169: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  82 | mag-{se,pe}.csv' \n sample: ${it.sample}" )}
╰     |                               ^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:114:15: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 114 |         .map{ it.keySet().join(format_sep) }
╰     |               ^^

Warn  subworkflows/local/generate_downstream_samplesheets/main.nf:115:47: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 115 |         .concat( ch_list_for_samplesheet.map{ it.values().join(format_
╰     |                                               ^^


Warn  subworkflows/local/utils_nfcore_detaxizer_pipeline/main.nf:32:5: Parameter was not used -- prefix with `_` to suppress warning
│  32 |     monochrome_logs   // boolean: Do not use coloured log outputs
╰     |     ^^^^^^^^^^^^^^^

Warn  subworkflows/local/utils_nfcore_detaxizer_pipeline/main.nf:35:5: Parameter was not used -- prefix with `_` to suppress warning
│  35 |     input             //  string: Path to input samplesheet
╰     |     ^^^^^

Warn  subworkflows/local/utils_nfcore_detaxizer_pipeline/main.nf:42:19: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  42 |     ch_versions = Channel.empty()
╰     |                   ^^^^^^^

Warn  subworkflows/local/utils_nfcore_detaxizer_pipeline/main.nf:67:144: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  67 | lect { "    https://doi.org/${it.trim().replace('https://doi.org/','')
╰     |                               ^^

Warn  subworkflows/local/utils_nfcore_detaxizer_pipeline/main.nf:104:5: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 104 |     Channel
╰     |     ^^^^^^^



Warn  subworkflows/nf-core/utils_nfcore_pipeline/main.nf:101:98: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 101 | mYAML(version) }.unique().mix(Channel.of(workflowVersionToYAML()))
╰     |                               ^^^^^^^



Error workflows/detaxizer.nf:46:1: Statements cannot be mixed with script declarations -- move statements into a process or workflow
│  46 | def ch_fasta_blastn = Channel.empty()
╰     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Error workflows/detaxizer.nf:48:1: Statements cannot be mixed with script declarations -- move statements into a process or workflow
│  46 | def ch_fasta_blastn = Channel.empty()
│  47 | 
│  48 | if ( !params.fasta_blastn && params.validation_blastn ) {
│     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
│  49 |     ch_fasta_blastn = Channel.fromPath(getGenomeAttribute('fasta'))
╰  50 | } else if ( params.validation_blastn ){

Error workflows/detaxizer.nf:57:1: Statements cannot be mixed with script declarations -- move statements into a process or workflow
│  57 | def ch_fasta_bbduk = Channel.empty()
╰     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Error workflows/detaxizer.nf:59:1: Statements cannot be mixed with script declarations -- move statements into a process or workflow
│  57 | def ch_fasta_bbduk = Channel.empty()
│  58 | 
│  59 | if ( !params.fasta_bbduk && params.classification_bbduk ) {
│     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
│  60 |     ch_fasta_bbduk = Channel.fromPath(getGenomeAttribute('fasta'))
╰  61 | } else if ( params.classification_bbduk ){

Error workflows/detaxizer.nf:212:13: `ch_fasta_bbduk` is not defined
│ 212 |             ch_fasta_bbduk.first()
╰     |             ^^^^^^^^^^^^^^

Error workflows/detaxizer.nf:305:30: `ch_fasta_blastn` is not defined
│ 305 |         ch_reference_fasta = ch_fasta_blastn
╰     |                              ^^^^^^^^^^^^^^^

Warn  workflows/detaxizer.nf:46:23: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  46 | def ch_fasta_blastn = Channel.empty()
╰     |                       ^^^^^^^

Warn  workflows/detaxizer.nf:49:23: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  49 |     ch_fasta_blastn = Channel.fromPath(getGenomeAttribute('fasta'))
╰     |                       ^^^^^^^

Warn  workflows/detaxizer.nf:52:23: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  52 |     ch_fasta_blastn = Channel.fromPath(params.fasta_blastn)
╰     |                       ^^^^^^^

Warn  workflows/detaxizer.nf:57:22: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  57 | def ch_fasta_bbduk = Channel.empty()
╰     |                      ^^^^^^^

Warn  workflows/detaxizer.nf:60:22: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  60 |     ch_fasta_bbduk = Channel.fromPath(getGenomeAttribute('fasta'))
╰     |                      ^^^^^^^

Warn  workflows/detaxizer.nf:63:22: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  63 |     ch_fasta_bbduk = Channel.fromPath(params.fasta_bbduk)
╰     |                      ^^^^^^^

Warn  workflows/detaxizer.nf:71:19: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  71 |     ch_versions = Channel.empty()
╰     |                   ^^^^^^^

Warn  workflows/detaxizer.nf:72:24: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  72 |     ch_multiqc_files = Channel.empty()
╰     |                        ^^^^^^^

Warn  workflows/detaxizer.nf:73:25: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  73 |     ch_filtered_reads = Channel.empty()
╰     |                         ^^^^^^^

Warn  workflows/detaxizer.nf:74:25: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  74 |     ch_removed_reads  = Channel.empty()
╰     |                         ^^^^^^^

Warn  workflows/detaxizer.nf:77:21: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  77 |         shortReads: it[1]
╰     |                     ^^

Warn  workflows/detaxizer.nf:79:57: Parameter was not used -- prefix with `_` to suppress warning
│  79 |         meta, short_reads_fastq_1, short_reads_fastq_2, long_reads_fas
╰     |                                                         ^^^^^^^^^^^^^^

Warn  workflows/detaxizer.nf:88:20: Implicit closure parameter is deprecated, declare an explicit parameter instead
│  88 |         longReads: it[3]
╰     |                    ^^

Warn  workflows/detaxizer.nf:90:15: Parameter was not used -- prefix with `_` to suppress warning
│  90 |         meta, short_reads_fastq_1, short_reads_fastq_2, long_reads_fas
╰     |               ^^^^^^^^^^^^^^^^^^^

Warn  workflows/detaxizer.nf:90:36: Parameter was not used -- prefix with `_` to suppress warning
│  90 |         meta, short_reads_fastq_1, short_reads_fastq_2, long_reads_fas
╰     |                                    ^^^^^^^^^^^^^^^^^^^

Warn  workflows/detaxizer.nf:112:68: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 112 | ch_multiqc_files = ch_multiqc_files.mix(FASTQC.out.zip.collect{it[1]})
╰     |                                                                ^^

Warn  workflows/detaxizer.nf:140:25: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 140 |         ch_kraken2_db = Channel.fromPath(params.kraken2db).map {
╰     |                         ^^^^^^^

Warn  workflows/detaxizer.nf:184:75: Parameter was not used -- prefix with `_` to suppress warning
│ 184 | KEN2REPORT.out.to_filter.map {meta, path -> path}
╰     |                               ^^^^

Warn  workflows/detaxizer.nf:277:13: Parameter was not used -- prefix with `_` to suppress warning
│ 277 |             meta, path -> [path]
╰     |             ^^^^

Warn  workflows/detaxizer.nf:398:17: Parameter was not used -- prefix with `_` to suppress warning
│ 398 |                 meta, path -> [path]
╰     |                 ^^^^

Warn  workflows/detaxizer.nf:438:49: Parameter was not used -- prefix with `_` to suppress warning
│ 438 |                 ch_to_filter.map { meta, reads, ids -> tuple(meta, rea
╰     |                                                 ^^^

Warn  workflows/detaxizer.nf:439:36: Parameter was not used -- prefix with `_` to suppress warning
│ 439 |                 ch_to_filter.map { meta, reads, ids -> ids.toString() 
╰     |                                    ^^^^

Warn  workflows/detaxizer.nf:439:42: Parameter was not used -- prefix with `_` to suppress warning
│ 439 |                 ch_to_filter.map { meta, reads, ids -> ids.toString() 
╰     |                                          ^^^^^

Warn  workflows/detaxizer.nf:440:17: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 440 |                 Channel.value('fastq.gz'),
╰     |                 ^^^^^^^

Warn  workflows/detaxizer.nf:441:17: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 441 |                 Channel.value(false)
╰     |                 ^^^^^^^

Warn  workflows/detaxizer.nf:447:53: Parameter was not used -- prefix with `_` to suppress warning
│ 447 |                     ch_to_filter.map { meta, reads, ids -> tuple(meta,
╰     |                                                     ^^^

Warn  workflows/detaxizer.nf:448:40: Parameter was not used -- prefix with `_` to suppress warning
│ 448 |                     ch_to_filter.map { meta, reads, ids -> ids.toStrin
╰     |                                        ^^^^

Warn  workflows/detaxizer.nf:448:46: Parameter was not used -- prefix with `_` to suppress warning
│ 448 |                     ch_to_filter.map { meta, reads, ids -> ids.toStrin
╰     |                                              ^^^^^

Warn  workflows/detaxizer.nf:449:21: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 449 |                     Channel.value('fastq.gz'),
╰     |                     ^^^^^^^

Warn  workflows/detaxizer.nf:450:21: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 450 |                     Channel.value(false)
╰     |                     ^^^^^^^

Warn  workflows/detaxizer.nf:455:37: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 455 |                 ch_filter_removed = Channel.empty()
╰     |                                     ^^^^^^^

Warn  workflows/detaxizer.nf:473:33: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 473 |             ch_removed2rename = Channel.empty()
╰     |                                 ^^^^^^^

Warn  workflows/detaxizer.nf:496:110: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 496 | reads ? RENAME_FASTQ_HEADERS_AFTER.out.fastq_removed : Channel.empty()
╰     |                                                        ^^^^^^^

Warn  workflows/detaxizer.nf:501:32: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 501 |             ch_removed_reads = Channel.empty()
╰     |                                ^^^^^^^

Warn  workflows/detaxizer.nf:580:32: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 580 |     ch_multiqc_config        = Channel.fromPath(
╰     |                                ^^^^^^^

Warn  workflows/detaxizer.nf:583:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 583 |         Channel.fromPath(params.multiqc_config, checkIfExists: true) :
╰     |         ^^^^^^^

Warn  workflows/detaxizer.nf:584:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 584 |         Channel.empty()
╰     |         ^^^^^^^

Warn  workflows/detaxizer.nf:586:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 586 |         Channel.fromPath(params.multiqc_logo, checkIfExists: true) :
╰     |         ^^^^^^^

Warn  workflows/detaxizer.nf:587:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 587 |         Channel.empty()
╰     |         ^^^^^^^

Warn  workflows/detaxizer.nf:591:27: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 591 |     ch_workflow_summary = Channel.value(paramsSummaryMultiqc(summary_p
╰     |                           ^^^^^^^

Warn  workflows/detaxizer.nf:597:45: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 597 |     ch_methods_description                = Channel.value(
╰     |                                             ^^^^^^^


Error nf-test.config:1:1: Config settings must be assigned with an equals sign (`=`)
│   1 | config {
│     | ^^^^^^^^
│   2 |     // location for all nf-test tests
│   3 |     testsDir "."
│   4 | 
╰   5 |     // nf-test directory including temporary files for each test


Nextflow linting complete!
 ❌ 3 files had 14 errors
 ✅ 46 files had no errors
